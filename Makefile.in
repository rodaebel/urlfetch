ERL= @ERLANG@
PYTHON= @PYTHON@
APP= "urlfetch_service"

all: compile

compile:
	@mkdir -p ebin
	@(cd src;$(MAKE) ERL=$(ERL))
	@(cd pyurlfetch; $(MAKE) PYTHON=$(PYTHON))

test: compile
	@$(ERL) -pa ebin -eval "eunit:test({application,$(APP)})" \
	-noshell -s init stop

edoc:
	@(cd src;$(MAKE) ERL=$(ERL) edoc)

clean:
	@(cd src;$(MAKE) ERL=$(ERL) clean)

distclean: clean
	rm -f config.log Makefile
	rm -rf bin
	rm -rf ebin
	@(cd pyurlfetch; $(MAKE) distclean)
